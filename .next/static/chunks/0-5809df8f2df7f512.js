"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[0],{64269:(e,t,s)=>{s.d(t,{cn:()=>l});var r=s(2821),a=s(75889);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.QP)((0,r.$)(t))}},77990:(e,t,s)=>{s.d(t,{Kl:()=>c,c1:()=>n,iL:()=>i,xc:()=>o});var r=s(12115),a=s(81716);let l=(0,s(78396).createAutonomyStore)();function n(e){let[t,s]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async()=>{try{let t=await l.getResponses(e);s(t)}catch(e){console.error("Failed to load responses:",e)}finally{n(!1)}})()},[e]),{responses:t,saveResponse:(0,r.useCallback)(async e=>{try{let t={...e,userId:"default_user"};await l.saveResponse(t),s(s=>s.find(t=>t.itemId===e.itemId)?s.map(s=>s.itemId===e.itemId?t:s):[...s,t])}catch(e){throw console.error("Failed to save response:",e),e}},[]),loading:a}}function o(){let[e,t]=(0,r.useState)(null),[s,n]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{let e=await l.getProfile();t(e)}catch(e){console.error("Failed to load profile:",e)}finally{n(!1)}})()},[]);let o=(0,r.useCallback)(async e=>{try{await l.saveProfile(e),t(e)}catch(e){throw console.error("Failed to save profile:",e),e}},[]),i=(0,r.useCallback)(async()=>{try{let e=await l.getAllResponses();if(0===e.length)return;let t=(0,a.cT)(e),s={userId:"default_user",scores:t.scores,composite_autonomy:t.composite_autonomy,interpretation:t.interpretation,lastUpdated:new Date,version:t.version};await o(s)}catch(e){throw console.error("Failed to recalculate profile:",e),e}},[o]);return{profile:e,saveProfile:o,recalculateProfile:i,loading:s}}function i(){let e=(0,r.useCallback)(async()=>{try{return await l.exportData()}catch(e){throw console.error("Failed to export data:",e),e}},[]),t=(0,r.useCallback)(async()=>{try{let t=await e(),{exportScoresCSV:r}=await Promise.resolve().then(s.bind(s,81716));if(t.profiles.length>0){let e=t.profiles[t.profiles.length-1],s={assessmentId:"export",userId:e.userId,timestamp:e.lastUpdated,version:e.version,scores:e.scores,composite_autonomy:e.composite_autonomy,response_integrity:{acquiescence_bias:0,straightlining:!1,completion_time_flag:!1,attention_check_passed:!0},completion_percentage:100,interpretation:e.interpretation};return r(s)}return"No profile data available for export"}catch(e){throw console.error("Failed to export CSV:",e),e}},[e]);return{exportData:e,exportCSV:t}}function c(){return{useResponses:n,useProfile:o,useExport:i,userId:()=>"default-user",loading:!1}}},84724:(e,t,s)=>{s.d(t,{O:()=>d});var r=s(95155),a=s(12115),l=s(64269);let n={1:"Strongly Disagree",2:"Disagree",3:"Somewhat Disagree",4:"Neutral",5:"Somewhat Agree",6:"Agree",7:"Strongly Agree"};function o(e){let{value:t,onChange:s,disabled:o=!1,className:i}=e,[c,d]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let e=e=>{if(o)return;let t=e.key;t>="1"&&t<="7"&&(s(parseInt(t)),e.preventDefault())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s,o]),(0,r.jsxs)("div",{className:(0,l.cn)("space-y-4",i),children:[(0,r.jsxs)("div",{className:"flex justify-between text-xs text-slate-500 px-1",children:[(0,r.jsx)("span",{children:"Strongly Disagree"}),(0,r.jsx)("span",{children:"Neutral"}),(0,r.jsx)("span",{children:"Strongly Agree"})]}),(0,r.jsx)("div",{className:"flex gap-2",children:[1,2,3,4,5,6,7].map(e=>(0,r.jsx)("button",{onClick:()=>!o&&s(e),onMouseEnter:()=>d(e),onMouseLeave:()=>d(null),disabled:o,className:(0,l.cn)("flex-1 h-12 rounded-lg border-2 transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-violet-500 focus:ring-offset-2 focus:ring-offset-slate-900",t===e?"border-violet-500 bg-violet-500/20 text-white":c===e?"border-violet-400 bg-violet-500/10 text-slate-200":"border-slate-600 hover:border-slate-500 text-slate-400 hover:text-slate-300",o&&"opacity-50 cursor-not-allowed"),"aria-label":"".concat(e,": ").concat(n[e]),"aria-pressed":t===e,children:(0,r.jsx)("span",{className:"font-medium",children:e})},e))}),t&&(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("span",{className:"text-sm text-slate-300 font-medium",children:n[t]})})]})}function i(e){let{options:t,value:s,onChange:a,disabled:n=!1,className:o}=e;return(0,r.jsx)("div",{className:(0,l.cn)("space-y-3",o),children:t.map((e,t)=>{let o=String.fromCharCode(65+t),i=s===e.id;return(0,r.jsx)("button",{onClick:()=>!n&&a(e.id),disabled:n,className:(0,l.cn)("w-full text-left p-4 rounded-xl border-2 transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-violet-500 focus:ring-offset-2 focus:ring-offset-slate-900",i?"border-violet-500 bg-violet-500/10 text-slate-200":"border-slate-600 hover:border-slate-500 text-slate-400 hover:text-slate-300",n&&"opacity-50 cursor-not-allowed"),"aria-pressed":i,children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("span",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-slate-700/50 flex items-center justify-center text-sm font-medium text-slate-300",children:o}),(0,r.jsx)("span",{className:"text-sm leading-relaxed",children:e.text})]})},e.id)})})}function c(e){let{current:t,total:s,className:a,showText:n=!0}=e,o=Math.min(t/s*100,100);return(0,r.jsxs)("div",{className:(0,l.cn)("space-y-2",a),children:[n&&(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsxs)("span",{className:"text-slate-400",children:[t," of ",s," completed"]}),(0,r.jsxs)("span",{className:"text-slate-500",children:[Math.round(o),"%"]})]}),(0,r.jsx)("div",{className:"h-2 bg-slate-800 rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-violet-500 transition-all duration-500 ease-out",style:{width:"".concat(o,"%")}})})]})}function d(e){var t;let{items:s,assessmentId:n,onComplete:d,onSaveProgress:u,className:x}=e,[m,h]=(0,a.useState)(0),[f,p]=(0,a.useState)({}),[g,v]=(0,a.useState)(!1),b=s[m],y=Object.keys(f).length;s.length,(0,a.useEffect)(()=>{u&&y>0&&u(Object.entries(f).map(e=>{let[t,s]=e;return{userId:"default_user",assessmentId:n,itemId:t,value:s,timestamp:new Date}}))},[f,n,u,y]);let j=(0,a.useCallback)(e=>{b&&(p(t=>({...t,[b.id]:e})),setTimeout(()=>{m<s.length-1?h(e=>e+1):(v(!0),d(Object.entries({...f,[b.id]:e}).map(e=>{let[t,s]=e;return{userId:"default_user",assessmentId:n,itemId:t,value:s,timestamp:new Date}})))},300))},[b,m,s.length,f,n,d]),N=(0,a.useCallback)(()=>{m>0&&h(e=>e-1)},[m]),w=(0,a.useCallback)(()=>{m<s.length-1&&h(e=>e+1)},[m,s.length]);return g?(0,r.jsxs)("div",{className:(0,l.cn)("text-center space-y-4",x),children:[(0,r.jsx)("div",{className:"text-2xl text-emerald-400",children:"✓"}),(0,r.jsx)("h3",{className:"text-xl font-medium text-slate-200",children:"Assessment Complete"}),(0,r.jsx)("p",{className:"text-slate-400",children:"Processing your responses..."})]}):b?(0,r.jsxs)("div",{className:(0,l.cn)("space-y-6",x),children:[(0,r.jsx)(c,{current:y,total:s.length,className:"mb-8"}),(0,r.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur border border-slate-700 rounded-2xl p-6",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3 mb-6",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-8 h-8 rounded-lg bg-slate-700/50 flex items-center justify-center text-sm text-slate-400",children:m+1}),(0,r.jsx)("p",{className:"text-slate-200 leading-relaxed flex-1",children:b.prompt})]}),"likert7"===b.type?(0,r.jsx)(o,{value:f[b.id],onChange:j}):"vignette"===b.type?(0,r.jsx)(i,{options:b.options,value:null==(t=f[b.id])?void 0:t.toString(),onChange:e=>{let t=b.options.find(t=>t.id===e);t&&j(t.score)}}):null]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("button",{onClick:N,disabled:0===m,className:(0,l.cn)("px-4 py-2 rounded-lg border-2 transition-all",0===m?"border-slate-700 text-slate-600 cursor-not-allowed":"border-slate-600 text-slate-400 hover:border-slate-500 hover:text-slate-300"),children:"← Previous"}),(0,r.jsxs)("div",{className:"text-sm text-slate-500",children:[m+1," of ",s.length]}),(0,r.jsx)("button",{onClick:w,disabled:m===s.length-1||!f[b.id],className:(0,l.cn)("px-4 py-2 rounded-lg border-2 transition-all",m!==s.length-1&&f[b.id]?"border-slate-600 text-slate-400 hover:border-slate-500 hover:text-slate-300":"border-slate-700 text-slate-600 cursor-not-allowed"),children:"Next →"})]})]}):(0,r.jsxs)("div",{className:(0,l.cn)("text-center space-y-4",x),children:[(0,r.jsx)("div",{className:"text-2xl text-amber-400",children:"⚠"}),(0,r.jsx)("h3",{className:"text-xl font-medium text-slate-200",children:"No Items Available"}),(0,r.jsx)("p",{className:"text-slate-400",children:"Please check your assessment configuration."})]})}}}]);