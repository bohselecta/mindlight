(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{13673:()=>{},23191:(e,t,r)=>{"use strict";r.d(t,{PWAProvider:()=>u});var s=r(95155),n=r(12115),a=r(39867),i=r(71847);let l=(0,i.A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),o=(0,i.A)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),d=(0,i.A)("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);function c(){let[e,t]=(0,n.useState)(null),[r,i]=(0,n.useState)(!1),[d,c]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(window.matchMedia("(display-mode: standalone)").matches)return void c(!0);let e=e=>{e.preventDefault(),t(e),setTimeout(()=>{i(!0)},3e3)},r=()=>{c(!0),i(!1),t(null)};return window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",r),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",r)}},[]);let m=async()=>{if(e)try{await e.prompt();let{outcome:r}=await e.userChoice;"accepted"===r?console.log("User accepted the install prompt"):console.log("User dismissed the install prompt"),t(null),i(!1)}catch(e){console.error("Error showing install prompt:",e)}};return d||!r||!e||sessionStorage.getItem("pwa-install-dismissed")?null:(0,s.jsx)("div",{className:"fixed bottom-4 left-4 right-4 z-50 md:left-auto md:right-4 md:max-w-sm",children:(0,s.jsxs)("div",{className:"bg-slate-800/95 backdrop-blur border border-slate-700 rounded-2xl p-4 shadow-2xl",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-violet-500 rounded-xl flex items-center justify-center",children:(0,s.jsx)(a.A,{className:"w-5 h-5 text-white"})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-slate-200 mb-1",children:"Install Reflector"}),(0,s.jsx)("p",{className:"text-xs text-slate-400 mb-3",children:"Add to your home screen for quick access to your epistemic autonomy training."}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:m,className:"flex-1 bg-gradient-to-r from-blue-500 to-violet-500 hover:from-blue-600 hover:to-violet-600 text-white text-xs py-2 px-3 rounded-lg font-medium transition-all",children:"Install"}),(0,s.jsx)("button",{onClick:()=>{i(!1),sessionStorage.setItem("pwa-install-dismissed","true")},className:"text-slate-400 hover:text-slate-200 transition-colors",children:(0,s.jsx)(l,{className:"w-4 h-4"})})]})]})]}),(0,s.jsx)("div",{className:"mt-3 pt-3 border-t border-slate-700",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[(0,s.jsx)(o,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:"Works on mobile and desktop"})]})})]})})}function m(){let[e,t]=(0,n.useState)(!1),[r,a]=(0,n.useState)(!0);return((0,n.useEffect)(()=>{let e=()=>{a(navigator.onLine)},r=window.matchMedia("(display-mode: standalone)").matches,s=/iPad|iPhone|iPod/.test(navigator.userAgent),n="standalone"in window.navigator&&window.navigator.standalone;return t(r||s&&n),e(),window.addEventListener("online",e),window.addEventListener("offline",e),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[]),e)?(0,s.jsx)("div",{className:"fixed top-4 right-4 z-40",children:(0,s.jsxs)("div",{className:"bg-slate-800/95 backdrop-blur border border-slate-700 rounded-xl px-3 py-2 flex items-center gap-2",children:[(0,s.jsx)(d,{className:"w-4 h-4 text-emerald-400"}),(0,s.jsx)("span",{className:"text-xs text-slate-300",children:"PWA Mode"}),!r&&(0,s.jsx)("div",{className:"w-2 h-2 bg-amber-400 rounded-full",title:"Offline"})]})}):null}function u(e){let{children:t}=e;return(0,n.useEffect)(()=>{"serviceWorker"in navigator&&window.addEventListener("load",async()=>{try{let e=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered successfully:",e.scope),e.addEventListener("updatefound",()=>{let t=e.installing;t&&t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&function(){let e=document.createElement("div");e.className="fixed top-4 right-4 z-50 bg-slate-800 border border-slate-700 rounded-xl p-4 shadow-2xl",e.innerHTML='\n    <div class="flex items-center gap-3">\n      <div class="w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center">\n        <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>\n        </svg>\n      </div>\n      <div>\n        <h3 class="text-sm font-medium text-slate-200">Update Available</h3>\n        <p class="text-xs text-slate-400">A new version of Reflector is ready.</p>\n      </div>\n      <button id="update-btn" class="bg-blue-500 hover:bg-blue-600 text-white text-xs py-1 px-3 rounded-lg transition-all">\n        Update\n      </button>\n      <button id="dismiss-btn" class="text-slate-400 hover:text-slate-200">\n        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>\n        </svg>\n      </button>\n    </div>\n  ',document.body.appendChild(e);let t=e.querySelector("#update-btn"),r=e.querySelector("#dismiss-btn");null==t||t.addEventListener("click",()=>{navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"SKIP_WAITING"}),e.remove()}),null==r||r.addEventListener("click",()=>{e.remove()}),setTimeout(()=>{document.body.contains(e)&&e.remove()},1e4)}()})}),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()})}catch(e){console.error("Service Worker registration failed:",e)}})},[]),(0,s.jsxs)(s.Fragment,{children:[t,(0,s.jsx)(c,{}),(0,s.jsx)(m,{})]})}},39867:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(71847).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},71847:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(12115);let n=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},a=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:m,...u}=e;return(0,s.createElement)("svg",{ref:t,...i,width:n,height:n,stroke:r,strokeWidth:o?24*Number(l)/Number(n):l,className:a("lucide",d),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"},...u},[...m.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),o=(e,t)=>{let r=(0,s.forwardRef)((r,i)=>{let{className:o,...d}=r;return(0,s.createElement)(l,{ref:i,iconNode:t,className:a("lucide-".concat(n(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...d})});return r.displayName=n(e),r}},95723:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,13673,23)),Promise.resolve().then(r.bind(r,23191))}},e=>{e.O(0,[978,441,255,358],()=>e(e.s=95723)),_N_E=e.O()}]);